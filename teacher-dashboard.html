<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÍµêÏÇ¨ ?Ä?úÎ≥¥??- Ingyu's AI World</title>
    <meta name="description" content="ÍµêÏÇ¨???ôÏÉù Í¥ÄÎ¶??Ä?úÎ≥¥??>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&family=Quicksand:wght@600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="teacher-dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="dashboard-header">
        <div class="header-container">
            <div class="header-left">
                <h1 class="header-title">Ingyu's AI World</h1>
                <span class="header-subtitle">ÍµêÏÇ¨ ?Ä?úÎ≥¥??/span>
            </div>
            <div class="header-right">
                <a href="index.html" class="secondary-button"
                    style="text-decoration: none; display: inline-flex; align-items: center; margin-right: 1rem; font-size: 0.9rem; padding: 0.5rem 1rem;">
                    ?è† ?πÏï±?ºÎ°ú ?¥Îèô
                </a>
                <span class="user-info" id="teacher-name">ÍµêÏÇ¨</span>
                <button class="logout-button" id="logout-btn">Î°úÍ∑∏?ÑÏõÉ</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="dashboard-main">
        <div class="dashboard-container">
            <!-- Tab Navigation -->
            <div class="dashboard-tabs">
                <button class="tab-button active" data-tab="students">?ôÏÉù Í¥ÄÎ¶?/button>
                <button class="tab-button" data-tab="emotions">Í∞êÏ†ï Ï∂úÏÑùÎ∂Ä</button>
                <button class="tab-button" data-tab="approvals">???πÏù∏ Í¥ÄÎ¶?/button>
            </div>

            <!-- Student Management Tab -->
            <div id="students-tab" class="tab-content active">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">?ôÏÉù Í¥ÄÎ¶?/h2>
                        <p class="section-subtitle" id="student-count">0Î™ÖÏùò ?ôÏÉù</p>
                    </div>
                    <button class="primary-button" id="add-student-btn">
                        <span class="button-icon">??/span>
                        <span class="button-text">?ôÏÉù Ï∂îÍ?</span>
                    </button>
                </div>

                <!-- Students Table -->
                <div class="table-container">
                    <table class="students-table">
                        <thead>
                            <tr>
                                <th>?¥Î¶Ñ</th>
                                <th>Í∞Ä?ÖÏùº</th>
                                <th>ÏµúÍ∑º ?ëÏÜç</th>
                                <th>Î°úÍ∑∏???üÏàò</th>
                                <th>Í¥ÄÎ¶?/th>
                            </tr>
                        </thead>
                        <tbody id="students-tbody">
                            <tr class="loading-row">
                                <td colspan="7">
                                    <div class="table-loading">
                                        <div class="spinner"></div>
                                        <p>?ôÏÉù Î™©Î°ù??Î∂àÎü¨?§Îäî Ï§?..</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="empty-state" id="empty-state" style="display: none;">
                        <div class="empty-icon">?ë®?çüé?/div>
                        <p class="empty-text">?±Î°ù???ôÏÉù???ÜÏäµ?àÎã§</p>
                        <p class="empty-subtext">?ôÏÉù Ï∂îÍ? Î≤ÑÌäº???åÎü¨ ?ôÏÉù???±Î°ù?òÏÑ∏??/p>
                    </div>
                </div>

                <!-- Usage Statistics Section -->
                <div class="section-header" style="margin-top: 3rem;">
                    <div>
                        <h2 class="section-title">?¨Ïö© ?µÍ≥Ñ</h2>
                        <p class="section-subtitle">?πÏï± ?¨Ïö© ?¥Ïó≠</p>
                    </div>
                    <div class="stats-filters">
                        <select class="filter-select" id="student-filter">
                            <option value="all">?ÑÏ≤¥ ?ôÏÉù</option>
                        </select>
                        <select class="filter-select" id="app-filter">
                            <option value="all">?ÑÏ≤¥ ??/option>
                        </select>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="chart-container"
                    style="background: white; padding: 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
                    <canvas id="usageChart"></canvas>
                </div>

                <!-- Statistics Table -->
                <div class="table-container">
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>?ôÏÉù</th>
                                <th>???¥Î¶Ñ</th>
                                <th>Ïπ¥ÌÖåÍ≥†Î¶¨</th>
                                <th>?¥Î¶≠ ?üÏàò</th>
                                <th>ÏµúÍ∑º ?ëÏÜç</th>
                            </tr>
                        </thead>
                        <tbody id="stats-tbody">
                            <tr class="loading-row">
                                <td colspan="5">
                                    <div class="table-loading">
                                        <div class="spinner"></div>
                                        <p>?µÍ≥ÑÎ•?Î∂àÎü¨?§Îäî Ï§?..</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="empty-state" id="stats-empty-state" style="display: none;">
                        <div class="empty-icon">?ìä</div>
                        <p class="empty-text">?¨Ïö© Í∏∞Î°ù???ÜÏäµ?àÎã§</p>
                        <p class="empty-subtext">?ôÏÉù?§Ïù¥ ?±ÏùÑ ?¨Ïö©?òÎ©¥ ?¨Í∏∞???úÏãú?©Îãà??/p>
                    </div>
                </div>
            </div>
<!-- Emotional Check-in Tab -->
<div id="emotions-tab" class="tab-content">
    <!-- Overview Section -->
    <div class="section-header">
        <div>
            <h2 class="section-title">Í∞êÏ†ï Ï∂úÏÑùÎ∂Ä</h2>
            <p class="section-subtitle" id="emotion-summary">?ôÏÉù?§Ïùò Í∞êÏ†ï ?ÅÌÉúÎ•??ïÏù∏?òÏÑ∏??/p>
        </div>
        <div class="stats-filters">
            <select class="filter-select" id="emotion-period-filter">
                <option value="today">?§Îäò</option>
                <option value="week" selected>?¥Î≤à Ï£?/option>
                <option value="month">?¥Î≤à ??/option>
                <option value="quarter">Î∂ÑÍ∏∞Î≥?/option>
            </select>
        </div>
    </div>

    <!-- AI Analysis Card -->
    <div class="ai-analysis-card" id="ai-analysis-card" style="display: none;">
        <div class="ai-analysis-header">
            <div class="ai-icon">?§ñ</div>
            <h3>AI ?ôÍ∏â Î∂ÑÏÑù Î¶¨Ìè¨??/h3>
            <button class="btn-refresh" id="btn-refresh-analysis">?îÑ ?àÎ°úÍ≥†Ïπ®</button>
        </div>

        <div class="ai-analysis-loading" id="ai-analysis-loading">
            <div class="spinner"></div>
            <p>AIÍ∞Ä ?ôÍ∏â Í∞êÏ†ï??Î∂ÑÏÑù?òÍ≥† ?àÏñ¥??..</p>
        </div>

        <div class="ai-analysis-content" id="ai-analysis-content" style="display: none;">
            <div class="analysis-section">
                <h4>?í° ?ÑÎ∞ò?ÅÏù∏ ?ôÍ∏â Î∂ÑÏúÑÍ∏?/h4>
                <p id="analysis-overview"></p>
            </div>

            <div class="analysis-section">
                <h4>?ìå Ï£ºÎ™©???®ÌÑ¥</h4>
                <ul id="analysis-patterns"></ul>
            </div>

            <div class="analysis-section">
                <h4>???§Ï≤ú ?úÏïà</h4>
                <ul id="analysis-suggestions"></ul>
            </div>

            <div class="analysis-section positive">
                <h4>?ëç Í∏çÏ†ï?ÅÏù∏ ??/h4>
                <p id="analysis-positives"></p>
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="emotion-stats-grid">
        <div class="stat-card">
            <div class="stat-icon">?ìä</div>
            <div class="stat-content">
                <div class="stat-label">Ï¥?Ï≤¥ÌÅ¨??/div>
                <div class="stat-value" id="total-checkins">0??/div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">??/div>
            <div class="stat-content">
                <div class="stat-label">Ï∞∏Ïó¨??/div>
                <div class="stat-value" id="checkin-rate">0%</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">?òä</div>
            <div class="stat-content">
                <div class="stat-label">Í∞Ä??ÎßéÏ? Í∞êÏ†ï</div>
                <div class="stat-value" id="top-emotion">-</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">?†Ô∏è</div>
            <div class="stat-content">
                <div class="stat-label">Í¥Ä???ÑÏöî ?ôÏÉù</div>
                <div class="stat-value" id="attention-students">0Î™?/div>
            </div>
        </div>
    </div>

    <!-- Emotion Distribution Chart -->
    <div class="chart-container"
        style="background: white; padding: 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
        <h3 style="margin-bottom: 1.5rem; color: #2d3748;">Í∞êÏ†ï Î∂ÑÌè¨</h3>
        <canvas id="emotionChart"></canvas>
    </div>

    <!-- Word Cloud Section -->
    <div class="wordcloud-container"
        style="background: white; padding: 2rem; border-radius: 16px; margin-bottom: 2rem; box-shadow: 0 4px 6px rgba(0,0,0,0.05);">
        <h3 style="margin-bottom: 1.5rem; color: #2d3748;">Í∞êÏ†ï ?®Ïñ¥ ?¥Îùº?∞Îìú</h3>
        <canvas id="wordCloud" width="800" height="400"></canvas>
    </div>

    <!-- Students Emotion List -->
    <div class="section-header" style="margin-top: 2rem;">
        <div>
            <h3 class="section-title">?ôÏÉùÎ≥?Í∞êÏ†ï Í∏∞Î°ù</h3>
            <p class="section-subtitle">Í∞úÎ≥Ñ ?ôÏÉù??Í∞êÏ†ï ?®ÌÑ¥???ïÏù∏?òÏÑ∏??/p>
        </div>
    </div>

    <div class="table-container">
        <table class="emotions-table">
            <thead>
                <tr>
                    <th>?ôÏÉù</th>
                    <th>ÏµúÍ∑º Í∞êÏ†ï</th>
                    <th>?†ÌÉù ?®Ïñ¥</th>
                    <th>Ï≤¥ÌÅ¨???üÏàò</th>
                    <th>ÏµúÍ∑º Ï≤¥ÌÅ¨??/th>
                    <th>?ÅÏÑ∏</th>
                </tr>
            </thead>
            <tbody id="emotions-tbody">
                <tr class="loading-row">
                    <td colspan="6">
                        <div class="table-loading">
                            <div class="spinner"></div>
                            <p>Í∞êÏ†ï Í∏∞Î°ù??Î∂àÎü¨?§Îäî Ï§?..</p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="empty-state" id="emotions-empty-state" style="display: none;">
            <div class="empty-icon">?òä</div>
            <p class="empty-text">Í∞êÏ†ï Ï≤¥ÌÅ¨??Í∏∞Î°ù???ÜÏäµ?àÎã§</p>
            <p class="empty-subtext">?ôÏÉù?§Ïù¥ Í∞êÏ†ï Ï∂úÏÑùÎ∂ÄÎ•??ëÏÑ±?òÎ©¥ ?¨Í∏∞???úÏãú?©Îãà??/p>
        </div>
    </div>
</div>


            <!-- App Approval Tab -->
            <div id="approvals-tab" class="tab-content">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">???πÏù∏ Í¥ÄÎ¶?/h2>
                        <p class="section-subtitle">?ôÏÉù?§ÏóêÍ≤?Î≥¥Ïó¨Ïß??±ÏùÑ ?†ÌÉù?¥Ï£º?∏Ïöî</p>
                    </div>
                    <div class="filters">
                        <button class="primary-button" id="approve-all-btn">Î™®Îëê ?πÏù∏</button>
                        <button class="secondary-button" id="unapprove-all-btn"
                            style="background: #f44336; color: white; border: none;">Î™®Îëê ÎØ∏Ïäπ??/button>
                    </div>
                </div>

                <div class="approval-grid" id="approval-grid">
                    <!-- App Approval Cards will be inserted here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Add/Edit Student Modal -->
    <div class="modal" id="student-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">?ôÏÉù Ï∂îÍ?</h3>
                <button class="modal-close" id="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <form id="student-form">
                    <div class="form-row">
                        <div class="form-group" style="width: 100%;">
                            <label class="form-label">?ÑÏù¥??*</label>
                            <input type="text" id="student-email" class="form-input" required placeholder="?? student1">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ÎπÑÎ?Î≤àÌò∏ *</label>
                        <input type="text" id="student-password" class="form-input" minlength="4" required
                            placeholder="4?êÎ¶¨ ?´Ïûê (?? 1234)">
                        <small class="form-hint">4?êÎ¶¨ ?´ÏûêÎ•??ÖÎ†•?¥Ï£º?∏Ïöî. (?? 1234)</small>
                    </div>

                    <div class="error-message" id="modal-error"></div>

                    <div class="modal-footer">
                        <button type="button" class="secondary-button" id="cancel-btn">Ï∑®ÏÜå</button>
                        <button type="submit" class="primary-button">
                            <span class="button-text" id="submit-text">Ï∂îÍ?</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal" id="delete-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">?ôÏÉù ??†ú ?ïÏù∏</h3>
                <button class="modal-close" id="delete-modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <p class="delete-message">?ïÎßêÎ°?<strong id="delete-student-name"></strong> ?ôÏÉù????†ú?òÏãúÍ≤†Ïäµ?àÍπå?</p>
                <p class="delete-warning">?†Ô∏è ?ôÏÉù??Î™®Îì† ?∞Ïù¥?∞Ï? ?¨Ïö© Í∏∞Î°ù???ÅÍµ¨?ÅÏúºÎ°???†ú?©Îãà??</p>

                <div class="modal-footer">
                    <button type="button" class="secondary-button" id="delete-cancel-btn">Ï∑®ÏÜå</button>
                    <button type="button" class="danger-button" id="delete-confirm-btn">??†ú</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>

    <!-- Dashboard Script -->
    <script src="teacher-dashboard.js"></script>
</body>

</html>
    <script src="emotional-checkin-dashboard.js"></script>
</body>
</html>
